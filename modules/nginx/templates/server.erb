server {
    <% if @host_param %>
    listen <%= @host_param %><%= ":#{@port_param}" if @port_param %> <% if @default_server_param %> default_server<% end %><% if @ipv_param6_only %> ipv6only=on<% end %>;
    <% end %>

    <% if @root_param %>
    root <%= @root_param %>;
    <% end %>

    <% if @index_param %>
    index <%= @index_param.join(' ') %>;
    <% end %>

    <% if @server_name_param %>
    server_name <%= @server_name_param %>;
    <% end %>

    <% @locations_param.each_pair do |location, values| %>
    location <%= location %> {
        <% values.each_pair do |key, value| %>
        <%= key %> <%= value %>;
        <% end %>
    }
    <% end %>

    <% @error_pages_param.each do |error_page| %>
    error_page <%= error_page %>;
    <% end %>
}
